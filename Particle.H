#pragma once
#define GLUT_DISABLE_ATEXIT_HACK
#include <gl/GLU.h>

class Particle {
	bool is_forever;//ッネ
	bool has_tex;//静z┪C
	float x, y;//旄m
	float size_x;//jp
	float size_y;
	unsigned int texture;//静z
	float speed_x;//t
	float speed_y;
	float acc_x;//[t
	float acc_y;
	float life;//ネR
	float angle;//à
	unsigned char color[3];//C
	friend class emitter;
	void draw(GLuint texture);//酶畈嗓l]静z^
	void draw();//酶畈嗓l]C狻^
	void show();
public:
	Particle();
	Particle(float _size_x, float _size_y,
		float _speed_x, float _speed_y,
		float _acc_x, float _acc_y,
		float _life, float _angle, unsigned int _texture, bool _is_forever);
	Particle(float _size_x, float _size_y,
		float _speed_x, float _speed_y,
		float _acc_x, float _acc_y,
		float _life, float _angle, unsigned char* _color, bool _is_forever);
};

class Emitter {
	float x1, y1, x2, y2; //og竟旄m
	int speed;//ogtv
	Particle** p;//og采l
	Particle* (*f)(); //飑lて采l酣缂偏w
public:
	void emit(Particle* (init)());
	void update();
	Emitter(int _speed, float _x1,
		float _x2, float _y1, float _y2);
};